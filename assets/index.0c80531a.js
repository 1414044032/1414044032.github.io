import{A as s,a as P,m as U}from"./interface.dd4c3312.js";import{B as L,C as R,r as p,F as H,D as I,d as r,o as b,c as x,j as y,e,f as o,I as C,g as n,J as M,K as W,n as $,p as F,_ as z}from"./index.8b4e0df5.js";import{f as T,e as G}from"./processCard.34166e83.js";import{_ as J}from"./index.vue_vue_type_script_setup_true_lang.45ca6477.js";import{_ as K}from"./index.vue_vue_type_script_setup_true_lang.666c15f8.js";import O from"./index.fc2c2d08.js";import"./interface.7e30e7ed.js";import"./index.vue_vue_type_script_setup_true_lang.0f2a16a1.js";import"./part.601bb279.js";import"./material.8e51136a.js";import"./index.vue_vue_type_script_setup_true_lang.71a764b5.js";import"./interface.b519aa86.js";import"./user.517568cb.js";import"./index.vue_vue_type_script_setup_true_lang.2ae15ae8.js";const q={class:"app-container"},Q=L({__name:"index",setup(X){const E={projectName:"",projectCode:"",partName:"",auditState:s.ALL,state:-1,isPage:!0,pageNumber:1,pageSize:10},{cloned:d,sync:D}=R(E),S=p([{productionNo:"",projectCode:"",projectName:"",partCode:"",partName:"",unit:"",count:0,materialName:"",auditState:s.PASS}]),g=p(!1),w=p(0),m=async()=>{g.value=!0;try{const u=await T(d.value),{data:a,msg:i}=u;console.log(a),S.value=a.data,w.value=a.total}catch(u){C.error(u)}finally{g.value=!1}};H(()=>{m()});const N=p({}),k=u=>{N.value=u,_.id=u.id,_.auditState=s.PASS,_.auditComment="",c.value=!0},c=p(!1),_=I({auditState:s.PASS,auditComment:""}),A=u=>{G({id:u.id,ratedWorkHour:u.ratedWorkHour}).then(a=>{const{data:i,msg:f}=a;if(i===1){C.success("\u5DE5\u65F6\u5B9A\u989D\u4FEE\u6539\u6210\u529F"),m();return}C.error(f)})};return(u,a)=>{const i=r("el-form-item"),f=r("el-input"),B=r("el-option"),V=r("el-select"),v=r("el-button"),h=r("el-form"),l=r("el-table-column"),j=r("el-table");return b(),x("div",q,[y("div",null,[e(h,{model:E,inline:!0,"label-width":"68px"},{default:o(()=>[e(i,{label:"\u9879\u76EE\u540D\u79F0"},{default:o(()=>[e(K,{modelValue:n(d).projectCode,"onUpdate:modelValue":a[0]||(a[0]=t=>n(d).projectCode=t),style:{width:"240px"},valueTag:"code"},null,8,["modelValue"])]),_:1}),e(i,{label:"\u96F6\u4EF6\u540D\u79F0"},{default:o(()=>[e(f,{modelValue:n(d).partName,"onUpdate:modelValue":a[1]||(a[1]=t=>n(d).partName=t),style:{width:"240px"}},null,8,["modelValue"])]),_:1}),e(i,{label:"\u72B6\u6001"},{default:o(()=>[e(V,{modelValue:n(d).auditState,"onUpdate:modelValue":a[2]||(a[2]=t=>n(d).auditState=t),style:{width:"240px"},placeholder:"\u8BF7\u9009\u62E9"},{default:o(()=>[(b(!0),x(M,null,W(n(P),t=>(b(),$(B,{key:t.value,label:t.label,value:t.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(i,null,{default:o(()=>[e(v,{type:"primary",icon:"Search",onClick:m},{default:o(()=>[F("\u67E5\u8BE2")]),_:1}),e(v,{icon:"Refresh",onClick:n(D)},{default:o(()=>[F("\u91CD\u7F6E")]),_:1},8,["onClick"])]),_:1})]),_:1})]),y("div",null,[e(j,{data:S.value,border:"",style:{width:"100%"}},{default:o(()=>[e(l,{prop:"productionNo",label:"\u751F\u4EA7\u7F16\u53F7"}),e(l,{prop:"projectCode",label:"\u9879\u76EE\u4EE3\u53F7"}),e(l,{prop:"projectName",label:"\u9879\u76EE\u540D\u79F0"}),e(l,{prop:"partCode",label:"\u96F6\u4EF6\u56FE\u53F7"}),e(l,{prop:"partName",label:"\u96F6\u4EF6\u540D\u79F0"}),e(l,{prop:"unit",label:"\u5355\u4F4D"}),e(l,{prop:"count",label:"\u6570\u91CF"}),e(l,{prop:"materialName",label:"\u6750\u6599\u540D\u79F0"}),e(l,{prop:"auditState",label:"\u72B6\u6001"},{default:o(t=>[e(J,{value:t.row.auditState,mapConfig:n(U)},null,8,["value","mapConfig"])]),_:1}),e(l,{prop:"auditComment",label:"\u5BA1\u6838\u610F\u89C1"}),e(l,{label:"\u64CD\u4F5C",fixed:"right",width:"250px"},{default:o(t=>[e(v,{size:"small",type:"primary",onClick:Y=>k(t.row),disabled:t.row.auditState!==n(s).PASS},{default:o(()=>[F("\u5DE5\u65F6\u5B9A\u989D")]),_:2},1032,["onClick","disabled"])]),_:1})]),_:1},8,["data"])]),e(O,{visible:c.value,"onUpdate:visible":a[3]||(a[3]=t=>c.value=t),data:N.value,action:"review",onReview:A},null,8,["visible","data"])])}}});const ce=z(Q,[["__scopeId","data-v-5287a2a5"]]);export{ce as default};
