import{t as R,v,_ as $,w as z}from"./index.vue_vue_type_script_setup_true_lang.71a764b5.js";import{F as n}from"./interface.b519aa86.js";import{B as W,C as X,r,D as H,F as J,d as o,G as q,o as y,c as g,j as c,e as l,f as t,g as f,H as O,n as Q,I as w,p as i,z as A,J as Z,K as ee}from"./index.8b4e0df5.js";import{_ as ue}from"./index.vue_vue_type_script_setup_true_lang.abca134c.js";import{_ as le}from"./index.vue_vue_type_script_setup_true_lang.45ca6477.js";import"./user.517568cb.js";import"./index.vue_vue_type_script_setup_true_lang.2ae15ae8.js";import"./index.vue_vue_type_script_setup_true_lang.666c15f8.js";import"./interface.7e30e7ed.js";const te={class:"app-container"},Be=W({__name:"index",setup(ae){const N={pageNumber:1,pageSize:10,isPage:!0,planNo:""},{cloned:d,sync:L}=X(N),C=r([]),V=r(0),x=async p=>{console.log(p);const u=await z(p),{data:_,msg:m}=u;if(_===1){w.success("\u70B9\u68C0\u8BA1\u5212\u65B0\u589E\u6210\u529F"),B.value=!1,D();return}w.error(m)},B=r(!1);r(!1),r(!1);const h=()=>{B.value=!0},s=H({form:{beginDate:"",count:0,endDate:"",planDetectionIdList:[],planDeviceNoList:[],planName:"",timeType:"",userId:0},rules:{},formLabelConfig:[{prop:"planName",label:"\u8BA1\u5212\u540D\u79F0",type:n.Input,placeholder:"\u8BF7\u8F93\u5165\u8BA1\u5212\u540D\u79F0"},{prop:"beginDate",label:"\u8BA1\u5212\u5F00\u59CB\u65F6\u95F4",type:n.DatePicker,placeholder:"\u8BF7\u9009\u62E9\u8BA1\u5212\u5F00\u59CB\u65F6\u95F4"},{prop:"endDate",label:"\u8BA1\u5212\u7ED3\u675F\u65F6\u95F4",type:n.DatePicker,placeholder:"\u8BF7\u9009\u62E9\u8BA1\u5212\u7ED3\u675F\u65F6\u95F4"},{prop:"planDetectionIdList",label:"\u68C0\u6D4B\u9879",type:n.DetectionSelect,multiple:!0,placeholder:"\u8BF7\u9009\u62E9\u68C0\u6D4B\u9879"},{prop:"planDeviceNoList",label:"\u68C0\u6D4B\u8BBE\u5907",type:n.DeviceSelect,placeholder:"\u8BF7\u9009\u62E9\u8BBE\u5907",multiple:!0},{prop:"count",label:"\u8BA1\u5212\u6B21\u6570",type:n.Number,placeholder:"\u8BF7\u8F93\u5165\u8BA1\u5212\u6B21\u6570",slotFlag:"count"},{prop:"userId",label:"\u8BA1\u5212\u8D1F\u8D23\u4EBA",type:n.UserSelect,placeholder:"\u8BF7\u9009\u62E9\u8BA1\u5212\u8D1F\u8D23\u4EBA"}]}),k={DAY:"\u65E5",WEEK:"\u5468",YEAR:"\u5E74"};J(()=>{D()});const F=r(!1),D=async()=>{F.value=!0;try{const p=await R(d.value),{data:u,msg:_}=p;C.value=u==null?void 0:u.data,V.value=u==null?void 0:u.total}finally{F.value=!1}},I=[{prop:"planName",label:"\u8BA1\u5212\u540D\u79F0"},{prop:"timeType",label:"\u65F6\u95F4\u9891\u6B21",slotFlag:"timeType"},{prop:"state",label:"\u72B6\u6001",slotFlag:"state"},{prop:"beginDate",label:"\u8BA1\u5212\u5F00\u59CB\u65E5\u671F"},{prop:"endDate",label:"\u8BA1\u5212\u7ED3\u675F\u65F6\u95F4"},{prop:"userNick",label:"\u8D1F\u8D23\u4EBA"},{prop:"deviceList",label:"\u68C0\u6D4B\u8BBE\u5907",slotFlag:"deviceList"},{prop:"detectionItemList",label:"\u68C0\u6D4B\u9879\u76EE",slotFlag:"detectionItemList"}],S={[v.UNEXECUTED]:{label:"\u672A\u6267\u884C",color:"danger"},[v.EXECUTING]:{label:"\u6267\u884C\u4E2D",color:"warning"},[v.SUSPENDED]:{label:"\u5DF2\u5B8C\u6210",color:"danger"}};return(p,u)=>{const _=o("el-input"),m=o("el-form-item"),E=o("el-button"),T=o("el-form"),P=o("el-col"),U=o("el-row"),j=o("el-table"),M=o("el-option"),Y=o("el-select"),G=o("el-input-number"),K=q("loading");return y(),g("div",te,[c("div",null,[l(T,{model:f(d),inline:!0},{default:t(()=>[l(m,{label:"\u8BA1\u5212\u5E8F\u5217\u53F7"},{default:t(()=>[l(_,{modelValue:f(d).planNo,"onUpdate:modelValue":u[0]||(u[0]=e=>f(d).planNo=e),style:{width:"240px"}},null,8,["modelValue"])]),_:1}),l(m,null,{default:t(()=>[l(E,{type:"primary",icon:"Search",onClick:D},{default:t(()=>[i("\u67E5\u8BE2")]),_:1}),l(E,{icon:"Refresh",onClick:f(L)},{default:t(()=>[i("\u91CD\u7F6E")]),_:1},8,["onClick"])]),_:1})]),_:1},8,["model"])]),l(U,{gutter:10,class:"mb8"},{default:t(()=>[l(P,{span:1.5},{default:t(()=>[l(E,{type:"primary",plain:"",icon:"Plus",onClick:h},{default:t(()=>[i("\u65B0\u589E")]),_:1})]),_:1},8,["span"])]),_:1}),c("div",null,[O((y(),Q(j,{data:C.value,border:"",style:{width:"100%"}},{default:t(()=>[l(ue,{columns:I},{timeType:t(e=>[c("span",null,A("\u6BCF"+k[e==null?void 0:e.row.timeType]+(e==null?void 0:e.row.count)+"\u6B21"),1)]),state:t(e=>[l(le,{value:e.row.state,mapConfig:S},null,8,["value"])]),deviceList:t(e=>{var a;return[c("div",null,A((a=e==null?void 0:e.row.deviceList)==null?void 0:a.map(b=>b.name).join(", ")),1)]}),detectionItemList:t(e=>{var a;return[c("div",null,A((a=e==null?void 0:e.row.detectionItemList)==null?void 0:a.map(b=>b.item).join(", ")),1)]}),_:1})]),_:1},8,["data"])),[[K,F.value]])]),l($,{modelValue:B.value,"onUpdate:modelValue":u[3]||(u[3]=e=>B.value=e),title:"\u65B0\u589E\u70B9\u68C0\u8BA1\u5212",formConfig:s,onSubmit:x},{count:t(e=>[l(m,{label:"\u65F6\u95F4\u9891\u6B21"},{default:t(()=>[i(" \u6BCF\xA0\xA0"),l(Y,{modelValue:s.form.timeType,"onUpdate:modelValue":u[1]||(u[1]=a=>s.form.timeType=a),style:{width:"100px"}},{default:t(()=>[(y(),g(Z,null,ee([{label:"\u65E5",value:"DAY"},{label:"\u5468",value:"WEEK"},{label:"\u5E74",value:"YEAR"}],a=>l(M,{key:a.value,label:a.label,value:a.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"]),i(" \xA0\xA0 "),l(G,{modelValue:s.form.count,"onUpdate:modelValue":u[2]||(u[2]=a=>s.form.count=a),"controls-position":"right",style:{width:"70px"}},null,8,["modelValue"]),i(" \xA0\xA0\u6B21 ")]),_:1})]),_:1},8,["modelValue","formConfig"])])}}});export{Be as default};
