import{B as ae,C as B,r as d,F as ue,D as le,d as i,o as f,c as $,j as A,e as t,f as a,H as ne,Q as ie,g as l,I as E,J as re,K as se,n as v,p as c,z as de,k as I,_ as pe}from"./index.8b4e0df5.js";import{A as L,a as me,m as ce,c as fe}from"./interface.dd4c3312.js";import{E as _e}from"./interface.7e30e7ed.js";import{f as Fe,a as ve,b as Ce,c as be}from"./processCard.34166e83.js";import{_ as Ee}from"./index.vue_vue_type_script_setup_true_lang.71a764b5.js";import{F as ge}from"./interface.b519aa86.js";import{_ as M}from"./index.vue_vue_type_script_setup_true_lang.45ca6477.js";import D from"./index.fc2c2d08.js";import"./user.517568cb.js";import"./index.vue_vue_type_script_setup_true_lang.2ae15ae8.js";import"./index.vue_vue_type_script_setup_true_lang.666c15f8.js";import"./index.vue_vue_type_script_setup_true_lang.0f2a16a1.js";import"./part.601bb279.js";import"./material.8e51136a.js";const we={class:"app-container"},Ne=["onClick"],ye=ae({__name:"index",setup(Be){const S={projectName:"",projectCode:"",partName:"",auditState:L.ALL,state:-1,isPage:!0,pageNumber:1,pageSize:10},{cloned:n,sync:O}=B(S);B({projectName:"",projectCode:"",partName:"",partCode:"",unit:"",materialName:"",materialId:"",productionDate:""});const R={noOrder:1,workTypeName:"",processContent:"",external:_e.EXTERNAL,count:0};B(R),d([]);const k=d([{productionNo:"",projectCode:"",projectName:"",partCode:"",partName:"",unit:"",count:0,materialName:"",auditState:L.PASS}]),x=d(!1),g=d(0),_=async u=>{((u==null?void 0:u.page)||(u==null?void 0:u.limit))&&(n.value.pageNumber=u.page,n.value.pageSize=u.limit),x.value=!0;try{const o=await Fe(n.value),{data:r,msg:p}=o;console.log(r),k.value=r.data,g.value=r.total}catch(o){E.error(o)}finally{x.value=!1}};ue(()=>{_()});const C=d(!1),w=d(!1),N=d(!1),V=d({}),P=d({}),G=u=>{V.value=u,w.value=!0},H=u=>{P.value=u,N.value=!0},j=async u=>{console.log("\u63D0\u4EA4\u5BA1\u6838"),await be(u),_()},J=()=>{C.value=!0},K=async u=>{const o=await ve(u),{data:r,msg:p}=o;if(r===1){E.success("\u5DE5\u827A\u5361\u65B0\u589E\u6210\u529F"),C.value=!1,_();return}},b=d(!1),Q=u=>{console.log("\u66F4\u6539\u751F\u4EA7\u7F16\u53F7"),U.form={id:u.id,productionNo:u.productionNo},b.value=!0},U=le({form:{},rules:{},formLabelConfig:[{label:"\u751F\u4EA7\u7F16\u53F7",prop:"productionNo",type:ge.Input,placeholder:"\u8BF7\u8F93\u5165\u751F\u4EA7\u7F16\u53F7"}]}),X=async u=>{console.log(u);const o=await Ce(u),{data:r,msg:p}=o;if(r===1){E.success("\u751F\u4EA7\u7F16\u53F7\u4FEE\u6539\u6210\u529F"),b.value=!1,_();return}E.error(p)};return(u,o)=>{const r=i("el-input"),p=i("el-form-item"),q=i("el-option"),W=i("el-select"),m=i("el-button"),Y=i("el-form"),y=i("el-col"),Z=i("el-row"),ee=i("el-tooltip"),s=i("el-table-column"),z=i("el-popconfirm"),te=i("el-table"),oe=i("pagination");return f(),$("div",we,[A("div",null,[t(Y,{model:S,inline:!0,"label-width":"68px"},{default:a(()=>[t(p,{label:"\u9879\u76EE\u540D\u79F0"},{default:a(()=>[t(r,{modelValue:l(n).projectName,"onUpdate:modelValue":o[0]||(o[0]=e=>l(n).projectName=e),style:{width:"240px"}},null,8,["modelValue"])]),_:1}),t(p,{label:"\u9879\u76EE\u4EE3\u53F7"},{default:a(()=>[t(r,{modelValue:l(n).projectCode,"onUpdate:modelValue":o[1]||(o[1]=e=>l(n).projectCode=e),style:{width:"240px"}},null,8,["modelValue"])]),_:1}),t(p,{label:"\u96F6\u4EF6\u540D\u79F0"},{default:a(()=>[t(r,{modelValue:l(n).partName,"onUpdate:modelValue":o[2]||(o[2]=e=>l(n).partName=e),style:{width:"240px"}},null,8,["modelValue"])]),_:1}),t(p,{label:"\u72B6\u6001"},{default:a(()=>[t(W,{modelValue:l(n).auditState,"onUpdate:modelValue":o[3]||(o[3]=e=>l(n).auditState=e),style:{width:"240px"},placeholder:"\u8BF7\u9009\u62E9"},{default:a(()=>[(f(!0),$(re,null,se(l(me),e=>(f(),v(q,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(p,null,{default:a(()=>[t(m,{type:"primary",icon:"Search",onClick:_},{default:a(()=>[c("\u67E5\u8BE2")]),_:1}),t(m,{icon:"Refresh",onClick:l(O)},{default:a(()=>[c("\u91CD\u7F6E")]),_:1},8,["onClick"])]),_:1})]),_:1})]),t(Z,{gutter:10,class:"mb8"},{default:a(()=>[t(y,{span:1.5},{default:a(()=>[t(m,{type:"primary",plain:"",icon:"Plus",onClick:J},{default:a(()=>[c("\u5236\u4F5C")]),_:1})]),_:1},8,["span"]),t(y,{span:1.5},{default:a(()=>[t(m,{type:"warning",plain:"",icon:"Download"},{default:a(()=>[c("\u5BFC\u51FASAP\u6587\u4EF6")]),_:1})]),_:1},8,["span"]),t(y,{span:1.5},{default:a(()=>[t(m,{type:"warning",plain:"",icon:"Download"},{default:a(()=>[c("\u6253\u5370")]),_:1})]),_:1},8,["span"])]),_:1}),A("div",null,[t(te,{data:k.value,border:"",style:{width:"100%"}},{default:a(()=>[t(s,{prop:"productionNo",label:"\u751F\u4EA7\u7F16\u53F7"},{default:a(e=>[t(ee,{effect:"dark",content:"\u70B9\u51FB\u4FEE\u6539",placement:"top"},{default:a(()=>{var F,T,h;return[A("span",{onClick:De=>Q(e.row)},de(((T=(F=e==null?void 0:e.row)==null?void 0:F.productionNo)==null?void 0:T.length)>0?(h=e==null?void 0:e.row)==null?void 0:h.productionNo:"\u70B9\u51FB\u8F93\u5165\u7F16\u53F7"),9,Ne)]}),_:2},1024)]),_:1}),t(s,{prop:"projectCode",label:"\u9879\u76EE\u4EE3\u53F7"}),t(s,{prop:"projectName",label:"\u9879\u76EE\u540D\u79F0"}),t(s,{prop:"partCode",label:"\u96F6\u4EF6\u56FE\u53F7"}),t(s,{prop:"partName",label:"\u96F6\u4EF6\u540D\u79F0"}),t(s,{prop:"unit",label:"\u5355\u4F4D"}),t(s,{prop:"count",label:"\u6570\u91CF"}),t(s,{prop:"materialName",label:"\u6750\u6599\u540D\u79F0"}),t(s,{prop:"auditState",label:"\u72B6\u6001"},{default:a(e=>[e.row.state!==0?(f(),v(M,{key:0,value:e.row.auditState,mapConfig:l(ce)},null,8,["value","mapConfig"])):(f(),v(M,{key:1,value:e.row.state,mapConfig:l(fe)},null,8,["value","mapConfig"]))]),_:1}),t(s,{prop:"auditComment",label:"\u5BA1\u6838\u610F\u89C1"}),t(s,{label:"\u64CD\u4F5C",fixed:"right",width:"250px"},{default:a(e=>[t(m,{size:"small",type:"primary",onClick:F=>G(e.row)},{default:a(()=>[c("\u8BE6\u60C5")]),_:2},1032,["onClick"]),t(m,{size:"small",type:"warning",onClick:F=>H(e.row)},{default:a(()=>[c("\u7F16\u8F91")]),_:2},1032,["onClick"]),e.row.state===0?(f(),v(z,{key:0,title:"\u786E\u5B9A\u63D0\u4EA4\u5417\uFF1F",confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u53D6\u6D88",onConfirm:F=>j({id:e.row.id,state:1})},{reference:a(()=>[t(m,{size:"small"},{default:a(()=>[c("\u63D0\u4EA4\u5BA1\u6838")]),_:1})]),_:2},1032,["onConfirm"])):I("",!0),e.row.state===1?(f(),v(z,{key:1,title:"\u786E\u5B9A\u63D0\u4EA4\u5417\uFF1F",confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u53D6\u6D88",onConfirm:F=>j({id:e.row.id,state:0})},{reference:a(()=>[t(m,{size:"small"},{default:a(()=>[c("\u64A4\u56DE\u5BA1\u6838")]),_:1})]),_:2},1032,["onConfirm"])):I("",!0)]),_:1})]),_:1},8,["data"]),ne(t(oe,{total:g.value,page:l(n).pageNumber,"onUpdate:page":o[4]||(o[4]=e=>l(n).pageNumber=e),limit:l(n).pageSize,"onUpdate:limit":o[5]||(o[5]=e=>l(n).pageSize=e),onPagination:_},null,8,["total","page","limit"]),[[ie,g.value>0]])]),t(D,{visible:C.value,"onUpdate:visible":o[6]||(o[6]=e=>C.value=e),onSubmit:K,action:"add"},null,8,["visible"]),t(D,{visible:w.value,"onUpdate:visible":o[7]||(o[7]=e=>w.value=e),data:V.value,action:"show"},null,8,["visible","data"]),t(D,{visible:N.value,"onUpdate:visible":o[8]||(o[8]=e=>N.value=e),data:P.value,action:"edit"},null,8,["visible","data"]),t(Ee,{modelValue:b.value,"onUpdate:modelValue":o[9]||(o[9]=e=>b.value=e),title:"\u4FEE\u6539\u8BBE\u5907",formConfig:U,onSubmit:X},null,8,["modelValue","formConfig"])])}}});const Oe=pe(ye,[["__scopeId","data-v-7cf42b76"]]);export{Oe as default};
