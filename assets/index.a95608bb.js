import{l as Z,D as V,F as r,_ as S,m as ee,n as ue,o as le,j as te,p as ae}from"./index.vue_vue_type_script_setup_true_lang.dcc7c371.js";import{_ as oe}from"./index.vue_vue_type_script_setup_true_lang.c403059b.js";import{A,r as d,D as U,d as n,o as g,k,B as ne,C as T,F as ce,c as L,l as h,e,f as t,g as c,G as se,H as v,I as ie,J as pe,n as F,_ as re}from"./index.6261e021.js";import"./user.6abe22d0.js";import"./index.vue_vue_type_script_setup_true_lang.11b02900.js";import"./index.vue_vue_type_script_setup_true_lang.15dd06b5.js";const de=A({__name:"index",emits:["update"],setup(z,{emit:w}){const o=p=>{w("update",p==null?void 0:p.id)};d();const b=d([{label:"\u8BBE\u5907\u7C7B\u578B",children:[]}]);d();const C=d({isPage:!1,deviceType:"",state:-1});function I(){Z(C.value).then(p=>{console.log(p),b.value[0].children=p.data.map(m=>({label:m.deviceType,id:m.id}))})}return U(()=>{I()}),(p,m)=>{const E=n("el-tree");return g(),k(E,{data:b.value,onNodeClick:o,"default-expand-all":""},null,8,["data"])}}}),me={class:"app-container device-types-container"},_e=A({__name:"index",setup(z){const w={name:"",state:V.ALL,pageNumber:1,pageSize:10,deviceTypeId:-1},{cloned:o,sync:b}=ne(w),C=d([]),I=async u=>{console.log(u);const l=await ee(u),{data:s,msg:i}=l;if(s===1){v.success("\u8BBE\u5907\u65B0\u589E\u6210\u529F"),y.value=!1,_();return}v.error(i)},p=async u=>{const l=await ue(u),{data:s,msg:i}=l;if(s===1){v.success("\u8BBE\u5907\u4FEE\u6539\u6210\u529F"),D.value=!1,_();return}v.error(i)},m=d(!1),E=d(0),_=async u=>{((u==null?void 0:u.page)||(u==null?void 0:u.limit))&&(o.value={...o.value,pageNumber:u.page,pageSize:u.limit}),m.value=!0;try{const l=await le(o.value),{data:s,msg:i}=l;C.value=s.data,E.value=s.total}catch(l){v.error(l)}finally{m.value=!1}};U(()=>{_()});const y=d(!1),D=d(!1),P=()=>{console.log("\u65B0\u589E"),y.value=!0},$=u=>{x.form={...u},D.value=!0},G=async u=>{const l=await ae({id:u}),{data:s,msg:i}=l;if(s===1){v.success("\u8BBE\u5907\u5220\u9664\u6210\u529F"),_();return}v.error(i)},M=u=>{o.value.deviceTypeId=u,_()},x=T({form:{},rules:{},formLabelConfig:[{label:"\u8BBE\u5907\u540D\u79F0",prop:"name",type:r.Input,placeholder:"\u8BF7\u8F93\u5165\u8BBE\u5907\u540D\u79F0"},{label:"\u4F4D\u7F6E",prop:"location",type:r.Input,placeholder:"\u8BF7\u8F93\u5165\u4F4D\u7F6E"},{label:"\u5236\u9020\u5546",prop:"manufacturer",type:r.Input,placeholder:"\u8BF7\u8F93\u5165\u5236\u9020\u5546"},{label:"\u89C4\u683C",prop:"specification",type:r.Input,placeholder:"\u8BF7\u8F93\u5165\u89C4\u683C"}]}),R=T({form:{name:"",location:"",manufacturer:"",specification:"",deviceTypeId:0},rules:{},formLabelConfig:[{label:"\u8BBE\u5907\u7C7B\u578B",prop:"deviceTypeId",type:r.DeviceTypeSelect,placeholder:"\u8BF7\u9009\u62E9\u8BBE\u5907\u7C7B\u578B"},{label:"\u8BBE\u5907\u540D\u79F0",prop:"name",type:r.Input,placeholder:"\u8BF7\u8F93\u5165\u8BBE\u5907\u540D\u79F0"},{label:"\u4F4D\u7F6E",prop:"location",type:r.Input,placeholder:"\u8BF7\u8F93\u5165\u4F4D\u7F6E"},{label:"\u5236\u9020\u5546",prop:"manufacturer",type:r.Input,placeholder:"\u8BF7\u8F93\u5165\u5236\u9020\u5546"},{label:"\u89C4\u683C",prop:"specification",type:r.Input,placeholder:"\u8BF7\u8F93\u5165\u89C4\u683C"}]}),j={[V.ENABLE]:{label:"\u542F\u7528",color:"success"},[V.DISABLE]:{label:"\u7981\u7528",color:"danger"}};return(u,l)=>{const s=n("el-input"),i=n("el-form-item"),q=n("el-option"),H=n("el-select"),B=n("el-button"),J=n("el-form"),N=n("el-col"),O=n("el-row"),f=n("el-table-column"),K=n("el-popconfirm"),Q=n("el-table"),W=n("pagination"),X=ce("loading");return g(),L("div",me,[h("div",null,[e(de,{onUpdate:M})]),h("div",null,[h("div",null,[e(J,{model:c(o),inline:!0},{default:t(()=>[e(i,{label:"\u8BBE\u5907\u540D\u79F0"},{default:t(()=>[e(s,{modelValue:c(o).name,"onUpdate:modelValue":l[0]||(l[0]=a=>c(o).name=a),style:{width:"150px"}},null,8,["modelValue"])]),_:1}),e(i,{label:"\u8BBE\u5907\u72B6\u6001"},{default:t(()=>[e(H,{modelValue:c(o).state,"onUpdate:modelValue":l[1]||(l[1]=a=>c(o).state=a),style:{width:"240px"},placeholder:"\u8BF7\u9009\u62E9"},{default:t(()=>[(g(!0),L(ie,null,pe(c(te),a=>(g(),k(q,{key:a.value,label:a.label,value:a.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(i,null,{default:t(()=>[e(B,{type:"primary",icon:"Search",onClick:_},{default:t(()=>[F("\u67E5\u8BE2")]),_:1}),e(B,{icon:"Refresh",onClick:c(b)},{default:t(()=>[F("\u91CD\u7F6E")]),_:1},8,["onClick"])]),_:1})]),_:1},8,["model"])]),e(O,{gutter:10,class:"mb8"},{default:t(()=>[e(N,{span:1.5},{default:t(()=>[e(B,{type:"primary",plain:"",icon:"Plus",onClick:P},{default:t(()=>[F("\u65B0\u589E")]),_:1})]),_:1},8,["span"]),e(N,{span:1.5},{default:t(()=>[e(B,{type:"warning",plain:"",icon:"Download"},{default:t(()=>[F("\u5BFC\u51FA")]),_:1})]),_:1},8,["span"])]),_:1}),h("div",null,[se((g(),k(Q,{data:C.value,border:"",style:{width:"100%"}},{default:t(()=>[e(f,{prop:"name",label:"\u8BBE\u5907\u540D\u79F0"}),e(f,{prop:"deviceNo",label:"\u8BBE\u5907\u7F16\u53F7"}),e(f,{prop:"location",label:"\u4F4D\u7F6E"}),e(f,{prop:"manufacturer",label:"\u5236\u9020\u5546"}),e(f,{prop:"specification",label:"\u89C4\u683C"}),e(f,{prop:"state",label:"\u72B6\u6001"},{default:t(a=>[e(oe,{value:a.row.state,mapConfig:j},null,8,["value"])]),_:1}),e(f,{label:"\u64CD\u4F5C"},{default:t(a=>[e(B,{size:"small",type:"warning",onClick:Y=>$(a.row)},{default:t(()=>[F("\u4FEE\u6539")]),_:2},1032,["onClick"]),e(K,{title:"\u786E\u8BA4\u5220\u9664\u5417\uFF1F",onConfirm:Y=>G(a.row.id)},{reference:t(()=>[e(B,{size:"small",type:"danger"},{default:t(()=>[F("\u5220\u9664")]),_:1})]),_:2},1032,["onConfirm"])]),_:1})]),_:1},8,["data"])),[[X,m.value]]),e(W,{total:E.value,page:c(o).pageNumber,"page-size":c(o).pageSize,onPagination:_},null,8,["total","page","page-size"])])]),e(c(S),{modelValue:y.value,"onUpdate:modelValue":l[2]||(l[2]=a=>y.value=a),title:"\u65B0\u589E\u8BBE\u5907",formConfig:R,onSubmit:I},null,8,["modelValue","formConfig"]),e(c(S),{modelValue:D.value,"onUpdate:modelValue":l[3]||(l[3]=a=>D.value=a),title:"\u4FEE\u6539\u8BBE\u5907",formConfig:x,onSubmit:p},null,8,["modelValue","formConfig"])])}}});const Ce=re(_e,[["__scopeId","data-v-d0f31a3b"]]);export{Ce as default};
