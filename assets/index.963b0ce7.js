import{L as y,B as L,C as $,r as d,F as G,d as r,G as O,o as m,c as v,j as B,e,f as u,g as n,H,n as C,J as I,K as J,p as D,I as K}from"./index.8b4e0df5.js";import{_ as R}from"./index.vue_vue_type_script_setup_true_lang.45ca6477.js";import{_ as q}from"./index.vue_vue_type_script_setup_true_lang.abca134c.js";import{_ as Q}from"./index.vue_vue_type_script_setup_true_lang.3377fbdc.js";var _=(a=>(a[a.All=-1]="All",a[a.Mechanical=1]="Mechanical",a[a.Electrical=0]="Electrical",a))(_||{});const W=[{label:"\u673A\u68B0\u88C5\u914D\u8BB0\u5F55",value:1},{label:"\u7535\u6C14\u88C5\u914D\u8BB0\u5F55",value:0}],X=[{label:"\u5168\u90E8",value:-1},...W],Z=a=>y({url:"/mes/assemble/list",method:"post",data:a}),P=a=>y({url:"/mes/assemble/upload",method:"post",data:a,headers:{"Content-Type":"multipart/form-data"},params:a}),ee={class:"app-container"},ue=L({__name:"index",setup(a){const A={isPage:!0,pageNumber:1,pageSize:10,beginDate:"",endDate:"",progressType:_.All,projectName:""},{cloned:l,sync:V}=$(A),g=d([]),f=d(!1),F=d(0),i=async s=>{f.value=!0,((s==null?void 0:s.page)||(s==null?void 0:s.limit))&&(l.value={...l.value,pageNumber:s.page,pageSize:s.limit});const o=await Z(l.value),{data:p,msg:c}=o;g.value=p.data,F.value=p.total,f.value=!1};G(()=>{i()});const h=[{label:"\u5B9E\u9645\u5F00\u59CB\u65E5\u671F",prop:"actualProgressDate"},{label:"\u5DE5\u4F5C\u5185\u5BB9",prop:"workContent"},{label:"\u5DE5\u4F5C\u65F6\u95F4",prop:"workDate"},{label:"\u5907\u6CE8",prop:"note"},{label:"\u88C5\u914D\u4EBA\u5458",prop:"operators"},{label:"\u8FDB\u5EA6\u7C7B\u578B",prop:"progressType",slotFlag:"progressType"},{label:"\u9879\u76EE\u540D\u79F0",prop:"projectName"},{label:"\u9879\u76EE\u8D1F\u8D23\u4EBA",prop:"projectManager"},{label:"\u521B\u5EFA\u65F6\u95F4",prop:"createAt"},{label:"\u521B\u5EFA\u4EBA",prop:"createBy"}],b=d(!1),k=async s=>{try{b.value=!0,console.log(s.files);const o=new FormData;o.append("file",s.files[0]),await P(o),K.success("\u5BFC\u5165\u6210\u529F"),i()}finally{b.value=!1}},w={[_.Electrical]:{label:"\u7535\u6C14\u88C5\u914D",color:"success"},[_.Mechanical]:{label:"\u673A\u68B0\u88C5\u914D",color:"primary"}};return(s,o)=>{const p=r("el-date-picker"),c=r("el-form-item"),M=r("el-option"),N=r("el-select"),Y=r("el-input"),E=r("el-button"),j=r("el-form"),U=r("el-col"),x=r("el-row"),z=r("el-table"),S=r("pagination"),T=O("loading");return m(),v("div",ee,[B("div",null,[e(j,{model:n(l),inline:!0},{default:u(()=>[e(c,{label:"\u5F00\u59CB\u65F6\u95F4"},{default:u(()=>[e(p,{modelValue:n(l).beginDate,"onUpdate:modelValue":o[0]||(o[0]=t=>n(l).beginDate=t),type:"datetime","value-format":"YYYY-MM-DD",placeholder:"\u9009\u62E9\u65E5\u671F"},null,8,["modelValue"])]),_:1}),e(c,{label:"\u7ED3\u675F\u65F6\u95F4"},{default:u(()=>[e(p,{modelValue:n(l).endDate,"onUpdate:modelValue":o[1]||(o[1]=t=>n(l).endDate=t),type:"datetime","value-format":"YYYY-MM-DD",placeholder:"\u9009\u62E9\u65E5\u671F"},null,8,["modelValue"])]),_:1}),e(c,{label:"\u8FDB\u5EA6\u7C7B\u578B"},{default:u(()=>[e(N,{modelValue:n(l).progressType,"onUpdate:modelValue":o[2]||(o[2]=t=>n(l).progressType=t),placeholder:"\u8BF7\u9009\u62E9"},{default:u(()=>[(m(!0),v(I,null,J(n(X),t=>(m(),C(M,{key:t.value,label:t.label,value:t.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(c,{label:"\u9879\u76EE\u540D\u79F0"},{default:u(()=>[e(Y,{modelValue:n(l).projectName,"onUpdate:modelValue":o[3]||(o[3]=t=>n(l).projectName=t),placeholder:"\u8BF7\u8F93\u5165\u9879\u76EE\u540D\u79F0"},null,8,["modelValue"])]),_:1}),e(c,null,{default:u(()=>[e(E,{type:"primary",icon:"Search",onClick:i},{default:u(()=>[D("\u67E5\u8BE2")]),_:1}),e(E,{icon:"Refresh",onClick:n(V)},{default:u(()=>[D("\u91CD\u7F6E")]),_:1},8,["onClick"])]),_:1})]),_:1},8,["model"])]),e(x,{gutter:10,class:"mb8"},{default:u(()=>[e(U,{span:1.5},{default:u(()=>[e(Q,{onChange:k,title:"\u5BFC\u5165",type:"primary",loading:b.value},null,8,["loading"])]),_:1},8,["span"])]),_:1}),B("div",null,[H((m(),C(z,{data:g.value,border:"",style:{width:"100%"}},{default:u(()=>[e(q,{columns:h},{progressType:u(t=>[e(R,{value:t.row.progressType,mapConfig:w},null,8,["value"])]),_:1})]),_:1},8,["data"])),[[T,f.value]]),e(S,{total:F.value,page:n(l).pageNumber,"page-size":n(l).pageSize,onPagination:i},null,8,["total","page","page-size"])])])}}});export{ue as default};
