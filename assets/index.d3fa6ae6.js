import{A as O,B as j,r as F,C as w,D as q,d as i,F as J,o as V,c as K,l as h,e,f as o,G as A,k as Q,O as W,g as p,H as s,n as _}from"./index.2e5bc0a8.js";import{F as c,_ as D}from"./index.vue_vue_type_script_setup_true_lang.e875871c.js";import{f as X,a as Y,b as Z,c as ee}from"./material.b324e2d0.js";import"./user.65af7cc1.js";import"./index.vue_vue_type_script_setup_true_lang.4fed71ce.js";import"./index.vue_vue_type_script_setup_true_lang.e793fdb4.js";const ue={class:"app-container"},pe=O({__name:"index",setup(le){const y={code:"",name:"",pageNumber:1,pageSize:10},{cloned:n,sync:k}=j(y),E=F([]),v=F(0),I=async l=>{const u=await X(l),{data:a,msg:r}=u;if(a===1){s.success("\u6750\u6599\u65B0\u589E\u6210\u529F"),b.value=!1,m();return}s.error(r)},S=async l=>{const u=await Y(l),{data:a,msg:r}=u;if(a===1){s.success("\u6750\u6599\u4FEE\u6539\u6210\u529F"),g.value=!1,m();return}s.error(r)},C=F(!1),m=async l=>{((l==null?void 0:l.page)||(l==null?void 0:l.limit))&&(n.value.pageNumber=l.page,n.value.pageSize=l.limit),C.value=!0;try{const u=await Z(n.value),{data:a,msg:r}=u;if(a){E.value=a.data,v.value=a.total;return}s.error(r)}catch(u){s.error(u)}finally{C.value=!1}},b=F(!1),U=()=>{console.log("\u65B0\u589E"),b.value=!0},x=w({form:{code:"",name:"",specification:"",manufacturer:""},rules:{},formLabelConfig:[{label:"\u6750\u6599\u7F16\u7801",prop:"name",type:c.Input,placeholder:"\u8BF7\u8F93\u5165\u6750\u6599\u7F16\u7801"},{label:"\u6750\u6599\u540D\u79F0",prop:"name",type:c.Input,placeholder:"\u8BF7\u8F93\u5165\u6750\u6599\u540D\u79F0"},{label:"\u89C4\u683C",prop:"specification",type:c.Input,placeholder:"\u8BF7\u8F93\u5165\u89C4\u683C"},{label:"\u751F\u4EA7\u5546",prop:"manufacturer",type:c.Input,placeholder:"\u8BF7\u8F93\u5165\u751F\u4EA7\u5546"}]});q(()=>{m()});const B=w({form:{},rules:{},formLabelConfig:[{label:"\u6750\u6599\u7F16\u7801",prop:"code",type:c.Input,placeholder:"\u8BF7\u8F93\u5165\u6750\u6599\u7F16\u7801"},{label:"\u6750\u6599\u540D\u79F0",prop:"name",type:c.Input,placeholder:"\u8BF7\u8F93\u5165\u6750\u6599\u540D\u79F0"},{label:"\u89C4\u683C",prop:"specification",type:c.Input,placeholder:"\u8BF7\u8F93\u5165\u89C4\u683C"},{label:"\u751F\u4EA7\u5546",prop:"manufacturer",type:c.Input,placeholder:"\u8BF7\u8F93\u5165\u751F\u4EA7\u5546"}]}),g=F(!1),M=l=>{B.form={...l},g.value=!0},N=async l=>{const u=await ee({id:l}),{data:a,msg:r}=u;if(a===1){s.success("\u6750\u6599\u5220\u9664\u6210\u529F"),m();return}s.error(r)};return(l,u)=>{const a=i("el-input"),r=i("el-form-item"),f=i("el-button"),z=i("el-form"),L=i("el-col"),$=i("el-row"),d=i("el-table-column"),G=i("el-popconfirm"),P=i("el-table"),R=i("pagination"),T=J("loading");return V(),K("div",ue,[h("div",null,[e(z,{model:y,inline:!0,"label-width":"68px"},{default:o(()=>[e(r,{label:"\u6750\u6599\u7F16\u7801"},{default:o(()=>[e(a,{modelValue:p(n).code,"onUpdate:modelValue":u[0]||(u[0]=t=>p(n).code=t),style:{width:"240px"}},null,8,["modelValue"])]),_:1}),e(r,{label:"\u6750\u6599\u540D\u79F0"},{default:o(()=>[e(a,{modelValue:p(n).name,"onUpdate:modelValue":u[1]||(u[1]=t=>p(n).name=t),style:{width:"240px"}},null,8,["modelValue"])]),_:1}),e(r,null,{default:o(()=>[e(f,{type:"primary",icon:"Search",onClick:m},{default:o(()=>[_("\u67E5\u8BE2")]),_:1}),e(f,{icon:"Refresh",onClick:p(k)},{default:o(()=>[_("\u91CD\u7F6E")]),_:1},8,["onClick"])]),_:1})]),_:1})]),e($,{gutter:10,class:"mb8"},{default:o(()=>[e(L,{span:1.5},{default:o(()=>[e(f,{type:"primary",plain:"",icon:"Plus",onClick:U},{default:o(()=>[_("\u65B0\u589E")]),_:1})]),_:1},8,["span"])]),_:1}),h("div",null,[A((V(),Q(P,{data:E.value,border:"",style:{width:"100%"}},{default:o(()=>[e(d,{prop:"code",label:"\u7269\u6599\u7F16\u7801"}),e(d,{prop:"name",label:"\u6750\u6599\u540D\u79F0"}),e(d,{prop:"specification",label:"\u89C4\u683C"}),e(d,{prop:"manufacturer",label:"\u751F\u4EA7\u5546"}),e(d,{prop:"createAt",label:"\u521B\u5EFA\u65F6\u95F4"}),e(d,{prop:"createBy",label:"\u521B\u5EFA\u4EBA"}),e(d,{label:"\u64CD\u4F5C"},{default:o(t=>[e(f,{type:"warning",size:"small",onClick:H=>M(t.row)},{default:o(()=>[_("\u4FEE\u6539")]),_:2},1032,["onClick"]),e(G,{title:"\u786E\u8BA4\u5220\u9664\u5417\uFF1F",onConfirm:H=>N(t.row.id)},{reference:o(()=>[e(f,{size:"small",type:"danger"},{default:o(()=>[_("\u5220\u9664")]),_:1})]),_:2},1032,["onConfirm"])]),_:1})]),_:1},8,["data"])),[[T,C.value]]),A(e(R,{total:v.value,page:p(n).pageNumber,"onUpdate:page":u[2]||(u[2]=t=>p(n).pageNumber=t),limit:p(n).pageSize,"onUpdate:limit":u[3]||(u[3]=t=>p(n).pageSize=t),onPagination:m},null,8,["total","page","limit"]),[[W,v.value>0]])]),e(D,{modelValue:b.value,"onUpdate:modelValue":u[4]||(u[4]=t=>b.value=t),title:"\u65B0\u589E\u6750\u6599",formConfig:x,onSubmit:I},null,8,["modelValue","formConfig"]),e(D,{modelValue:g.value,"onUpdate:modelValue":u[5]||(u[5]=t=>g.value=t),title:"\u4FEE\u6539\u6750\u6599",formConfig:B,onSubmit:S},null,8,["modelValue","formConfig"])])}}});export{pe as default};
