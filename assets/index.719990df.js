import{A as Q,B as X,r as d,D as Y,H as p,C as B,d as n,F as Z,o as D,c as k,l as V,e as t,f as a,g as s,G as S,k as T,O as ee,I as te,J as oe,n as f}from"./index.2e5bc0a8.js";import{b as ae,P as le,p as ue}from"./interface.47eb8c89.js";import{u as ne,f as se,F as y,_ as P,a as re,b as ie,c as pe}from"./index.vue_vue_type_script_setup_true_lang.e875871c.js";import{_ as ce}from"./index.vue_vue_type_script_setup_true_lang.c9bf5dc0.js";import"./user.65af7cc1.js";import"./index.vue_vue_type_script_setup_true_lang.4fed71ce.js";import"./index.vue_vue_type_script_setup_true_lang.e793fdb4.js";const me={class:"app-container"},ye=Q({__name:"index",setup(de){const x=ne(),h={workType:"",state:-1,pageNumber:1,pageSize:10},{cloned:r,sync:U}=X(h),E=d([]),C=d(0),I=async l=>{const e=await re(l),{data:i,msg:u}=e;if(i===1){p.success("\u5DE5\u79CD\u65B0\u589E\u6210\u529F"),_.value=!1,c();return}p.error(u)},N=l=>{F.form={...l},g.value=!0};Y(()=>{c()});const z=async l=>{const e=await pe({id:l}),{data:i,msg:u}=e;if(i===1){p.success("\u5DE5\u79CD\u5220\u9664\u6210\u529F"),c();return}p.error(u)},A=async l=>{const e=await ie(l),{data:i,msg:u}=e;if(i===1){p.success("\u5DE5\u79CD\u4FEE\u6539\u6210\u529F"),g.value=!1,c();return}p.error(u)},v=d(!1),c=async()=>{v.value=!0;try{const l=await se(r.value),{data:e,msg:i}=l;E.value=e.data,C.value=e.total,x.updateWorkTypeManage(e.data.map(u=>({id:u.id,name:u.workType})))}catch(l){p.error(l)}finally{v.value=!1}},_=d(!1),g=d(!1),L=()=>{_.value=!0},M=B({form:{workType:""},rules:{},formLabelConfig:[{label:"\u5DE5\u79CD\u540D\u79F0",prop:"workType",type:y.Input,placeholder:"\u8BF7\u8F93\u5165\u5DE5\u79CD\u540D\u79F0"}]}),F=B({form:{},rules:{},formLabelConfig:[{label:"\u5DE5\u79CD\u540D\u79F0",prop:"workType",type:y.Input,placeholder:"\u8BF7\u8F93\u5165\u5DE5\u79CD\u540D\u79F0"},{label:"\u72B6\u6001",prop:"state",type:y.Radio,placeholder:"\u8BF7\u9009\u62E9\u72B6\u6001",options:ae}]});return(l,e)=>{const i=n("el-input"),u=n("el-form-item"),$=n("el-option"),j=n("el-select"),m=n("el-button"),O=n("el-form"),G=n("el-col"),R=n("el-row"),b=n("el-table-column"),W=n("el-popconfirm"),q=n("el-table"),H=n("pagination"),J=Z("loading");return D(),k("div",me,[V("div",null,[t(O,{model:s(r),inline:!0,"label-width":"68px"},{default:a(()=>[t(u,{label:"\u5DE5\u79CD\u540D\u79F0"},{default:a(()=>[t(i,{modelValue:s(r).workType,"onUpdate:modelValue":e[0]||(e[0]=o=>s(r).workType=o),style:{width:"240px"}},null,8,["modelValue"])]),_:1}),t(u,{label:"\u72B6\u6001"},{default:a(()=>[t(j,{modelValue:s(r).state,"onUpdate:modelValue":e[1]||(e[1]=o=>s(r).state=o),style:{width:"240px"},placeholder:"\u8BF7\u9009\u62E9"},{default:a(()=>[(D(!0),k(te,null,oe(s(le),o=>(D(),T($,{key:o.value,label:o.label,value:o.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(u,null,{default:a(()=>[t(m,{type:"primary",icon:"Search",onClick:c},{default:a(()=>[f("\u67E5\u8BE2")]),_:1}),t(m,{icon:"Refresh",onClick:s(U)},{default:a(()=>[f("\u91CD\u7F6E")]),_:1},8,["onClick"])]),_:1})]),_:1},8,["model"])]),t(R,{gutter:10,class:"mb8"},{default:a(()=>[t(G,{span:1.5},{default:a(()=>[t(m,{type:"primary",plain:"",icon:"Plus",onClick:L},{default:a(()=>[f("\u65B0\u589E")]),_:1})]),_:1},8,["span"])]),_:1}),V("div",null,[S((D(),T(q,{data:E.value,border:"",style:{width:"100%"}},{default:a(()=>[t(b,{prop:"workType",label:"\u5DE5\u79CD\u540D\u79F0"}),t(b,{prop:"state",label:"\u72B6\u6001"},{default:a(o=>[t(ce,{value:o.row.state,mapConfig:s(ue)},null,8,["value","mapConfig"])]),_:1}),t(b,{label:"\u64CD\u4F5C"},{default:a(o=>[t(m,{size:"small",type:"warning",onClick:K=>N(o.row)},{default:a(()=>[f("\u4FEE\u6539")]),_:2},1032,["onClick"]),t(W,{title:"\u786E\u5B9A\u5220\u9664\u8BE5\u5DE5\u79CD\u5417\uFF1F",confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u53D6\u6D88",icon:"el-icon-question",onConfirm:K=>{var w;return z((w=o.row)==null?void 0:w.id)}},{reference:a(()=>[t(m,{size:"small",type:"danger"},{default:a(()=>[f("\u5220\u9664")]),_:1})]),_:2},1032,["onConfirm"])]),_:1})]),_:1},8,["data"])),[[J,v.value]]),S(t(H,{total:C.value,page:s(r).pageNumber,"onUpdate:page":e[2]||(e[2]=o=>s(r).pageNumber=o),limit:s(r).pageSize,"onUpdate:limit":e[3]||(e[3]=o=>s(r).pageSize=o),onPagination:c},null,8,["total","page","limit"]),[[ee,C.value>0]])]),t(P,{modelValue:_.value,"onUpdate:modelValue":e[4]||(e[4]=o=>_.value=o),title:"\u65B0\u589E\u5DE5\u79CD",formConfig:M,onSubmit:I},null,8,["modelValue","formConfig"]),t(P,{modelValue:g.value,"onUpdate:modelValue":e[5]||(e[5]=o=>g.value=o),title:"\u4FEE\u6539\u5DE5\u79CD",formConfig:F,onSubmit:A},null,8,["modelValue","formConfig"])])}}});export{ye as default};
