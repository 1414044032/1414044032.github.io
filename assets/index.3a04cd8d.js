import{B as Q,C as J,r as f,D,F as K,d as i,G as O,o as V,c as W,j as A,e,f as l,H as U,n as X,Q as Y,g as s,I as p,p as g}from"./index.8b4e0df5.js";import{_ as I}from"./index.vue_vue_type_script_setup_true_lang.71a764b5.js";import{F as c}from"./interface.b519aa86.js";import{f as Z,a as ee,b as ue,c as te,d as le}from"./material.8e51136a.js";import{_ as ae}from"./index.vue_vue_type_script_setup_true_lang.3377fbdc.js";import"./user.517568cb.js";import"./index.vue_vue_type_script_setup_true_lang.2ae15ae8.js";import"./index.vue_vue_type_script_setup_true_lang.666c15f8.js";import"./interface.7e30e7ed.js";const oe={class:"app-container"},ge=Q({__name:"index",setup(ne){const B={code:"",name:"",pageNumber:1,pageSize:10},{cloned:n,sync:k}=J(B),E=f([]),C=f(0),M=async t=>{const u=await Z(t),{data:o,msg:r}=u;if(o===1){p.success("\u6750\u6599\u65B0\u589E\u6210\u529F"),_.value=!1,d();return}p.error(r)},S=async t=>{const u=await ee(t),{data:o,msg:r}=u;if(o===1){p.success("\u6750\u6599\u4FEE\u6539\u6210\u529F"),b.value=!1,d();return}p.error(r)},v=f(!1),d=async t=>{((t==null?void 0:t.page)||(t==null?void 0:t.limit))&&(n.value.pageNumber=t.page,n.value.pageSize=t.limit),v.value=!0;try{const u=await ue(n.value),{data:o,msg:r}=u;if(o){E.value=o.data,C.value=o.total;return}p.error(r)}catch(u){p.error(u)}finally{v.value=!1}},_=f(!1),x=()=>{console.log("\u65B0\u589E"),_.value=!0},N=D({form:{code:"",name:"",specification:"",manufacturer:""},rules:{code:[{required:!0,message:"\u8BF7\u8F93\u5165\u6750\u6599\u7F16\u7801",trigger:"blur"}],name:[{required:!0,message:"\u8BF7\u8F93\u5165\u6750\u6599\u540D\u79F0",trigger:"blur"}],specification:[{required:!0,message:"\u8BF7\u8F93\u5165\u89C4\u683C",trigger:"blur"}],manufacturer:[{required:!0,message:"\u8BF7\u8F93\u5165\u751F\u4EA7\u5546",trigger:"blur"}]},formLabelConfig:[{label:"\u6750\u6599\u7F16\u7801",prop:"code",type:c.Input,placeholder:"\u8BF7\u8F93\u5165\u6750\u6599\u7F16\u7801"},{label:"\u6750\u6599\u540D\u79F0",prop:"name",type:c.Input,placeholder:"\u8BF7\u8F93\u5165\u6750\u6599\u540D\u79F0"},{label:"\u89C4\u683C",prop:"specification",type:c.Input,placeholder:"\u8BF7\u8F93\u5165\u89C4\u683C"},{label:"\u751F\u4EA7\u5546",prop:"manufacturer",type:c.Input,placeholder:"\u8BF7\u8F93\u5165\u751F\u4EA7\u5546"}]});K(()=>{d()});const w=D({form:{},rules:{},formLabelConfig:[{label:"\u6750\u6599\u7F16\u7801",prop:"code",type:c.Input,placeholder:"\u8BF7\u8F93\u5165\u6750\u6599\u7F16\u7801"},{label:"\u6750\u6599\u540D\u79F0",prop:"name",type:c.Input,placeholder:"\u8BF7\u8F93\u5165\u6750\u6599\u540D\u79F0"},{label:"\u89C4\u683C",prop:"specification",type:c.Input,placeholder:"\u8BF7\u8F93\u5165\u89C4\u683C"},{label:"\u751F\u4EA7\u5546",prop:"manufacturer",type:c.Input,placeholder:"\u8BF7\u8F93\u5165\u751F\u4EA7\u5546"}]}),b=f(!1),z=t=>{w.form={...t},b.value=!0},q=async t=>{const u=await te({id:t}),{data:o,msg:r}=u;if(o===1){p.success("\u6750\u6599\u5220\u9664\u6210\u529F"),d();return}p.error(r)},y=f(!1),L=async t=>{try{y.value=!0;const u=new FormData;u.append("file",t.files[0]),await le(u),p.success("\u5BFC\u5165\u6210\u529F"),d()}finally{y.value=!1}};return(t,u)=>{const o=i("el-input"),r=i("el-form-item"),F=i("el-button"),$=i("el-form"),h=i("el-col"),G=i("el-row"),m=i("el-table-column"),P=i("el-popconfirm"),R=i("el-table"),T=i("pagination"),j=O("loading");return V(),W("div",oe,[A("div",null,[e($,{model:B,inline:!0,"label-width":"68px"},{default:l(()=>[e(r,{label:"\u6750\u6599\u7F16\u7801"},{default:l(()=>[e(o,{modelValue:s(n).code,"onUpdate:modelValue":u[0]||(u[0]=a=>s(n).code=a),style:{width:"240px"}},null,8,["modelValue"])]),_:1}),e(r,{label:"\u6750\u6599\u540D\u79F0"},{default:l(()=>[e(o,{modelValue:s(n).name,"onUpdate:modelValue":u[1]||(u[1]=a=>s(n).name=a),style:{width:"240px"}},null,8,["modelValue"])]),_:1}),e(r,null,{default:l(()=>[e(F,{type:"primary",icon:"Search",onClick:d},{default:l(()=>[g("\u67E5\u8BE2")]),_:1}),e(F,{icon:"Refresh",onClick:s(k)},{default:l(()=>[g("\u91CD\u7F6E")]),_:1},8,["onClick"])]),_:1})]),_:1})]),e(G,{gutter:10,class:"mb8"},{default:l(()=>[e(h,{span:1.5},{default:l(()=>[e(F,{type:"primary",plain:"",icon:"Plus",onClick:x},{default:l(()=>[g("\u65B0\u589E")]),_:1})]),_:1},8,["span"]),e(h,{span:1.5},{default:l(()=>[e(ae,{onChange:L,title:"\u5BFC\u5165",type:"warning",loading:y.value},null,8,["loading"])]),_:1},8,["span"])]),_:1}),A("div",null,[U((V(),X(R,{data:E.value,border:"",style:{width:"100%"}},{default:l(()=>[e(m,{prop:"code",label:"\u7269\u6599\u7F16\u7801"}),e(m,{prop:"name",label:"\u6750\u6599\u540D\u79F0"}),e(m,{prop:"specification",label:"\u89C4\u683C"}),e(m,{prop:"manufacturer",label:"\u751F\u4EA7\u5546"}),e(m,{prop:"createAt",label:"\u521B\u5EFA\u65F6\u95F4"}),e(m,{prop:"createBy",label:"\u521B\u5EFA\u4EBA"}),e(m,{label:"\u64CD\u4F5C"},{default:l(a=>[e(F,{type:"warning",size:"small",onClick:H=>z(a.row)},{default:l(()=>[g("\u4FEE\u6539")]),_:2},1032,["onClick"]),e(P,{title:"\u786E\u8BA4\u5220\u9664\u5417\uFF1F",onConfirm:H=>q(a.row.id)},{reference:l(()=>[e(F,{size:"small",type:"danger"},{default:l(()=>[g("\u5220\u9664")]),_:1})]),_:2},1032,["onConfirm"])]),_:1})]),_:1},8,["data"])),[[j,v.value]]),U(e(T,{total:C.value,page:s(n).pageNumber,"onUpdate:page":u[2]||(u[2]=a=>s(n).pageNumber=a),limit:s(n).pageSize,"onUpdate:limit":u[3]||(u[3]=a=>s(n).pageSize=a),onPagination:d},null,8,["total","page","limit"]),[[Y,C.value>0]])]),e(I,{modelValue:_.value,"onUpdate:modelValue":u[4]||(u[4]=a=>_.value=a),title:"\u65B0\u589E\u6750\u6599",formConfig:N,onSubmit:M},null,8,["modelValue","formConfig"]),e(I,{modelValue:b.value,"onUpdate:modelValue":u[5]||(u[5]=a=>b.value=a),title:"\u4FEE\u6539\u6750\u6599",formConfig:w,onSubmit:S},null,8,["modelValue","formConfig"])])}}});export{ge as default};
