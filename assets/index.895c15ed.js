import{a as x,C as A,B as j,e as M,g as R}from"./index.dc7bc0b7.js";import{F as u}from"./interface.b519aa86.js";import{_ as F}from"./index.vue_vue_type_script_setup_true_lang.45ca6477.js";import{B as V,C as $,r as s,F as G,D as _,d as p,G as L,o as b,c as O,j as U,H,n as q,f as a,e as t,g,p as B,I as E}from"./index.8b4e0df5.js";import{_ as J}from"./index.vue_vue_type_script_setup_true_lang.abca134c.js";import{S as C}from"./interface.7e30e7ed.js";const K={class:"app-container"},oe=V({__name:"index",setup(Q){const v={isPage:!0,pageNumber:1,pageSize:10},{cloned:n,sync:W}=$(v),m=s([]),y=s(!1),d=s(0),i=async e=>{((e==null?void 0:e.page)||(e==null?void 0:e.limit))&&(n.value={...n.value,pageNumber:e.page,pageSize:e.limit});const r=await M(n.value),{data:o,msg:c}=r;m.value=o.data,d.value=o.total};G(()=>{i()}),s(!1);const D=s(!1),h=e=>{S.form={...e},D.value=!0},S=_({form:{},rules:{},formLabelConfig:[{label:"\u6210\u672C\u540D\u79F0",prop:"itemName",type:u.Input,placeholder:"\u8BF7\u8F93\u5165"},{label:"\u6210\u672C\u5355\u4F4D",prop:"itemUnit",type:u.Input,placeholder:"\u8BF7\u8F93\u5165\u6210\u672C\u5355\u4F4D"},{label:"\u5355\u4EF7",prop:"unitPrice",type:u.Input,placeholder:"\u8BF7\u8F93\u5165\u6210\u672C\u5355\u4EF7"},{label:"\u6210\u672C\u7C7B\u578B",prop:"itemType",type:u.Select,placeholder:"\u8BF7\u9009\u62E9\u6210\u672C\u7C7B\u578B",options:x}]});_({form:{itemName:"",itemUnit:"",unitPrice:0,itemType:A.Person},rules:{},formLabelConfig:[{label:"\u6210\u672C\u540D\u79F0",prop:"itemName",type:u.Input,placeholder:"\u8BF7\u8F93\u5165"},{label:"\u6210\u672C\u5355\u4F4D",prop:"itemUnit",type:u.Input,placeholder:"\u8BF7\u8F93\u5165\u6210\u672C\u5355\u4F4D"},{label:"\u5355\u4EF7",prop:"unitPrice",type:u.Number,placeholder:"\u8BF7\u8F93\u5165\u6210\u672C\u5355\u4EF7"},{label:"\u6210\u672C\u7C7B\u578B",prop:"itemType",type:u.Radio,placeholder:"\u8BF7\u9009\u62E9\u6210\u672C\u7C7B\u578B",options:j}]});const I=[{label:"\u9879\u76EE\u4EE3\u53F7",prop:"code"},{label:"\u6838\u7B97ID",prop:"costId"},{label:"\u8BBE\u5907\u6210\u672C",prop:"deviceCost"},{label:"\u6750\u6599\u6210\u672C",prop:"materialCost"},{label:"\u9879\u76EE\u540D\u79F0",prop:"name"},{label:"\u5176\u4ED6\u6210\u672C",prop:"otherCost"},{label:"\u4EBA\u5458\u6210\u672C",prop:"personCost"},{label:"\u9879\u76EE\u8D1F\u8D23\u4EBA",prop:"projectManager"},{label:"\u9879\u76EE\u72B6\u6001",prop:"state",slotFlag:"state"},{label:"\u6210\u672C\u6838\u7B97\u72B6\u6001",prop:"taskState",slotFlag:"taskState"}],f={[C.PROCESSING]:{label:"\u6267\u884C\u4E2D",color:"warning"},[C.NOT_START]:{label:"\u672A\u6267\u884C",color:"danger"},[C.FINISHED]:{label:"\u5DF2\u5B8C\u6210",color:"success"}},T=async e=>{const r=await R({projectCode:e}),{data:o,msg:c}=r;if(o===1){E.success("\u6210\u672C\u6838\u7B97\u6267\u884C\u6210\u529F"),i();return}E.error(c)};return(e,r)=>{const o=p("el-button"),c=p("el-popconfirm"),N=p("el-table-column"),w=p("el-table"),k=p("pagination"),P=L("loading");return b(),O("div",K,[U("div",null,[H((b(),q(w,{data:m.value,border:"",style:{width:"100%"}},{default:a(()=>[t(J,{columns:I},{state:a(l=>[t(F,{value:l.row.state,mapConfig:f},null,8,["value"])]),taskState:a(l=>[t(F,{value:l.row.taskState,mapConfig:f},null,8,["value"])]),_:1}),t(N,{label:"\u64CD\u4F5C"},{default:a(l=>[t(o,{size:"small",type:"warning",onClick:z=>h(l.row)},{default:a(()=>[B("\u4FEE\u6539")]),_:2},1032,["onClick"]),t(c,{title:"\u786E\u8BA4\u6267\u884C\u5417\uFF1F",onConfirm:z=>T(l.row.code)},{reference:a(()=>[t(o,{size:"small",type:"danger"},{default:a(()=>[B("\u6267\u884C")]),_:1})]),_:2},1032,["onConfirm"])]),_:1})]),_:1},8,["data"])),[[P,y.value]]),t(k,{total:d.value,page:g(n).pageNumber,"page-size":g(n).pageSize,onPagination:i},null,8,["total","page","page-size"])])])}}});export{oe as default};
