import{l as Z,D as V,_ as S,m as ee,n as ue,o as le,j as te,p as oe}from"./index.vue_vue_type_script_setup_true_lang.71a764b5.js";import{F as r}from"./interface.b519aa86.js";import{_ as ae}from"./index.vue_vue_type_script_setup_true_lang.45ca6477.js";import{B as U,r as d,F as z,d as n,o as g,n as x,C as ne,D as T,G as ce,c as L,j as h,e,f as t,g as c,H as se,I as v,J as ie,K as pe,p as F,_ as re}from"./index.8b4e0df5.js";import"./user.517568cb.js";import"./index.vue_vue_type_script_setup_true_lang.2ae15ae8.js";import"./index.vue_vue_type_script_setup_true_lang.666c15f8.js";import"./interface.7e30e7ed.js";const de=U({__name:"index",emits:["update"],setup(A,{emit:w}){const a=p=>{w("update",p==null?void 0:p.id)};d();const b=d([{label:"\u8BBE\u5907\u7C7B\u578B",children:[]}]);d();const C=d({isPage:!1,deviceType:"",state:-1});function I(){Z(C.value).then(p=>{console.log(p),b.value[0].children=p.data.map(m=>({label:m.deviceType,id:m.id}))})}return z(()=>{I()}),(p,m)=>{const E=n("el-tree");return g(),x(E,{data:b.value,onNodeClick:a,"default-expand-all":""},null,8,["data"])}}}),me={class:"app-container device-types-container"},_e=U({__name:"index",setup(A){const w={name:"",state:V.ALL,pageNumber:1,pageSize:10,deviceTypeId:-1},{cloned:a,sync:b}=ne(w),C=d([]),I=async u=>{console.log(u);const l=await ee(u),{data:s,msg:i}=l;if(s===1){v.success("\u8BBE\u5907\u65B0\u589E\u6210\u529F"),y.value=!1,_();return}v.error(i)},p=async u=>{const l=await ue(u),{data:s,msg:i}=l;if(s===1){v.success("\u8BBE\u5907\u4FEE\u6539\u6210\u529F"),D.value=!1,_();return}v.error(i)},m=d(!1),E=d(0),_=async u=>{((u==null?void 0:u.page)||(u==null?void 0:u.limit))&&(a.value={...a.value,pageNumber:u.page,pageSize:u.limit}),m.value=!0;try{const l=await le(a.value),{data:s,msg:i}=l;C.value=s.data,E.value=s.total}catch(l){v.error(l)}finally{m.value=!1}};z(()=>{_()});const y=d(!1),D=d(!1),P=()=>{console.log("\u65B0\u589E"),y.value=!0},$=u=>{k.form={...u},D.value=!0},G=async u=>{const l=await oe({id:u}),{data:s,msg:i}=l;if(s===1){v.success("\u8BBE\u5907\u5220\u9664\u6210\u529F"),_();return}v.error(i)},M=u=>{a.value.deviceTypeId=u,_()},k=T({form:{},rules:{},formLabelConfig:[{label:"\u8BBE\u5907\u540D\u79F0",prop:"name",type:r.Input,placeholder:"\u8BF7\u8F93\u5165\u8BBE\u5907\u540D\u79F0"},{label:"\u4F4D\u7F6E",prop:"location",type:r.Input,placeholder:"\u8BF7\u8F93\u5165\u4F4D\u7F6E"},{label:"\u5236\u9020\u5546",prop:"manufacturer",type:r.Input,placeholder:"\u8BF7\u8F93\u5165\u5236\u9020\u5546"},{label:"\u89C4\u683C",prop:"specification",type:r.Input,placeholder:"\u8BF7\u8F93\u5165\u89C4\u683C"}]}),j=T({form:{name:"",location:"",manufacturer:"",specification:"",deviceTypeId:0},rules:{},formLabelConfig:[{label:"\u8BBE\u5907\u7C7B\u578B",prop:"deviceTypeId",type:r.DeviceTypeSelect,placeholder:"\u8BF7\u9009\u62E9\u8BBE\u5907\u7C7B\u578B"},{label:"\u8BBE\u5907\u540D\u79F0",prop:"name",type:r.Input,placeholder:"\u8BF7\u8F93\u5165\u8BBE\u5907\u540D\u79F0"},{label:"\u4F4D\u7F6E",prop:"location",type:r.Input,placeholder:"\u8BF7\u8F93\u5165\u4F4D\u7F6E"},{label:"\u5236\u9020\u5546",prop:"manufacturer",type:r.Input,placeholder:"\u8BF7\u8F93\u5165\u5236\u9020\u5546"},{label:"\u89C4\u683C",prop:"specification",type:r.Input,placeholder:"\u8BF7\u8F93\u5165\u89C4\u683C"}]}),R={[V.ENABLE]:{label:"\u542F\u7528",color:"success"},[V.DISABLE]:{label:"\u7981\u7528",color:"danger"}};return(u,l)=>{const s=n("el-input"),i=n("el-form-item"),q=n("el-option"),H=n("el-select"),B=n("el-button"),J=n("el-form"),N=n("el-col"),K=n("el-row"),f=n("el-table-column"),O=n("el-popconfirm"),Q=n("el-table"),W=n("pagination"),X=ce("loading");return g(),L("div",me,[h("div",null,[e(de,{onUpdate:M})]),h("div",null,[h("div",null,[e(J,{model:c(a),inline:!0},{default:t(()=>[e(i,{label:"\u8BBE\u5907\u540D\u79F0"},{default:t(()=>[e(s,{modelValue:c(a).name,"onUpdate:modelValue":l[0]||(l[0]=o=>c(a).name=o),style:{width:"150px"}},null,8,["modelValue"])]),_:1}),e(i,{label:"\u8BBE\u5907\u72B6\u6001"},{default:t(()=>[e(H,{modelValue:c(a).state,"onUpdate:modelValue":l[1]||(l[1]=o=>c(a).state=o),style:{width:"240px"},placeholder:"\u8BF7\u9009\u62E9"},{default:t(()=>[(g(!0),L(ie,null,pe(c(te),o=>(g(),x(q,{key:o.value,label:o.label,value:o.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(i,null,{default:t(()=>[e(B,{type:"primary",icon:"Search",onClick:_},{default:t(()=>[F("\u67E5\u8BE2")]),_:1}),e(B,{icon:"Refresh",onClick:c(b)},{default:t(()=>[F("\u91CD\u7F6E")]),_:1},8,["onClick"])]),_:1})]),_:1},8,["model"])]),e(K,{gutter:10,class:"mb8"},{default:t(()=>[e(N,{span:1.5},{default:t(()=>[e(B,{type:"primary",plain:"",icon:"Plus",onClick:P},{default:t(()=>[F("\u65B0\u589E")]),_:1})]),_:1},8,["span"]),e(N,{span:1.5},{default:t(()=>[e(B,{type:"warning",plain:"",icon:"Download"},{default:t(()=>[F("\u5BFC\u51FA")]),_:1})]),_:1},8,["span"])]),_:1}),h("div",null,[se((g(),x(Q,{data:C.value,border:"",style:{width:"100%"}},{default:t(()=>[e(f,{prop:"name",label:"\u8BBE\u5907\u540D\u79F0"}),e(f,{prop:"deviceNo",label:"\u8BBE\u5907\u7F16\u53F7"}),e(f,{prop:"location",label:"\u4F4D\u7F6E"}),e(f,{prop:"manufacturer",label:"\u5236\u9020\u5546"}),e(f,{prop:"specification",label:"\u89C4\u683C"}),e(f,{prop:"state",label:"\u72B6\u6001"},{default:t(o=>[e(ae,{value:o.row.state,mapConfig:R},null,8,["value"])]),_:1}),e(f,{label:"\u64CD\u4F5C"},{default:t(o=>[e(B,{size:"small",type:"warning",onClick:Y=>$(o.row)},{default:t(()=>[F("\u4FEE\u6539")]),_:2},1032,["onClick"]),e(O,{title:"\u786E\u8BA4\u5220\u9664\u5417\uFF1F",onConfirm:Y=>G(o.row.id)},{reference:t(()=>[e(B,{size:"small",type:"danger"},{default:t(()=>[F("\u5220\u9664")]),_:1})]),_:2},1032,["onConfirm"])]),_:1})]),_:1},8,["data"])),[[X,m.value]]),e(W,{total:E.value,page:c(a).pageNumber,"page-size":c(a).pageSize,onPagination:_},null,8,["total","page","page-size"])])]),e(c(S),{modelValue:y.value,"onUpdate:modelValue":l[2]||(l[2]=o=>y.value=o),title:"\u65B0\u589E\u8BBE\u5907",formConfig:j,onSubmit:I},null,8,["modelValue","formConfig"]),e(c(S),{modelValue:D.value,"onUpdate:modelValue":l[3]||(l[3]=o=>D.value=o),title:"\u4FEE\u6539\u8BBE\u5907",formConfig:k,onSubmit:p},null,8,["modelValue","formConfig"])])}}});const ye=re(_e,[["__scopeId","data-v-d0f31a3b"]]);export{ye as default};
