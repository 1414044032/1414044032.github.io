import{A as M,B as $,r as f,D as z,C as x,d as o,o as v,c as w,l as S,e,f as t,H as b,g as n,I as G,J as I,k as O,n as m,G as q,O as H,_ as K}from"./index.2e5bc0a8.js";import{A as p,a as Q,m as W}from"./interface.47eb8c89.js";import{f as X,d as Y}from"./processCard.fb500f87.js";import{_ as Z}from"./index.vue_vue_type_script_setup_true_lang.c9bf5dc0.js";import{_ as ee}from"./index.vue_vue_type_script_setup_true_lang.e793fdb4.js";const te={class:"app-container"},ae={class:"dialog-footer"},le=M({__name:"index",setup(ue){const E={projectName:"",projectCode:"",partName:"",auditState:p.ALL,state:-1,isPage:!0,pageNumber:1,pageSize:10},{cloned:s,sync:D}=$(E),g=f([{productionNo:"",projectCode:"",projectName:"",partCode:"",partName:"",unit:"",count:0,materialName:"",auditState:p.PASS}]),A=f(!1),N=f(0),F=async()=>{A.value=!0;try{const r=await X(s.value),{data:l,msg:i}=r;console.log(l),g.value=l.data,N.value=l.total}catch(r){b.error(r)}finally{A.value=!1}};z(()=>{F()});const k=r=>{u.id=r.id,u.auditState=p.PASS,u.auditComment="",c.value=!0},c=f(!1),u=x({auditState:p.PASS,auditComment:""}),h=()=>{c.value=!1},j=async()=>{var r;if(u.auditState===p.REJECT&&!u.auditComment){await((r=y.value)==null?void 0:r.validate()),b.error("\u8BF7\u586B\u5199\u5BA1\u6838\u610F\u89C1");return}Y({id:u.id,auditState:u.auditState,auditComment:u.auditComment}).then(l=>{const{data:i,msg:C}=l;if(i===1){b.success("\u5BA1\u6838\u6210\u529F"),c.value=!1,F();return}b.error(C)})},y=f(null),P=x({auditComment:[{required:!0,message:"\u8BF7\u8F93\u5165\u5BA1\u6838\u610F\u89C1",trigger:"blur"}]});return(r,l)=>{const i=o("el-form-item"),C=o("el-input"),U=o("el-option"),R=o("el-select"),_=o("el-button"),V=o("el-form"),d=o("el-table-column"),L=o("el-table"),B=o("el-radio"),T=o("el-radio-group"),J=o("el-dialog");return v(),w("div",te,[S("div",null,[e(V,{model:E,inline:!0,"label-width":"68px"},{default:t(()=>[e(i,{label:"\u9879\u76EE\u540D\u79F0"},{default:t(()=>[e(ee,{modelValue:n(s).projectCode,"onUpdate:modelValue":l[0]||(l[0]=a=>n(s).projectCode=a),style:{width:"240px"},valueTag:"code"},null,8,["modelValue"])]),_:1}),e(i,{label:"\u96F6\u4EF6\u540D\u79F0"},{default:t(()=>[e(C,{modelValue:n(s).partName,"onUpdate:modelValue":l[1]||(l[1]=a=>n(s).partName=a),style:{width:"240px"}},null,8,["modelValue"])]),_:1}),e(i,{label:"\u72B6\u6001"},{default:t(()=>[e(R,{modelValue:n(s).auditState,"onUpdate:modelValue":l[2]||(l[2]=a=>n(s).auditState=a),style:{width:"240px"},placeholder:"\u8BF7\u9009\u62E9"},{default:t(()=>[(v(!0),w(G,null,I(n(Q),a=>(v(),O(U,{key:a.value,label:a.label,value:a.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(i,null,{default:t(()=>[e(_,{type:"primary",icon:"Search",onClick:F},{default:t(()=>[m("\u67E5\u8BE2")]),_:1}),e(_,{icon:"Refresh",onClick:n(D)},{default:t(()=>[m("\u91CD\u7F6E")]),_:1},8,["onClick"])]),_:1})]),_:1})]),S("div",null,[e(L,{data:g.value,border:"",style:{width:"100%"}},{default:t(()=>[e(d,{prop:"productionNo",label:"\u751F\u4EA7\u7F16\u53F7"}),e(d,{prop:"projectCode",label:"\u9879\u76EE\u4EE3\u53F7"}),e(d,{prop:"projectName",label:"\u9879\u76EE\u540D\u79F0"}),e(d,{prop:"partCode",label:"\u96F6\u4EF6\u56FE\u53F7"}),e(d,{prop:"partName",label:"\u96F6\u4EF6\u540D\u79F0"}),e(d,{prop:"unit",label:"\u5355\u4F4D"}),e(d,{prop:"count",label:"\u6570\u91CF"}),e(d,{prop:"materialName",label:"\u6750\u6599\u540D\u79F0"}),e(d,{prop:"auditState",label:"\u72B6\u6001"},{default:t(a=>[e(Z,{value:a.row.auditState,mapConfig:n(W)},null,8,["value","mapConfig"])]),_:1}),e(d,{label:"\u64CD\u4F5C",fixed:"right",width:"250px"},{default:t(a=>[e(_,{size:"small",type:"primary",onClick:oe=>k(a.row)},{default:t(()=>[m("\u5BA1\u6838")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])]),e(J,{modelValue:c.value,"onUpdate:modelValue":l[5]||(l[5]=a=>c.value=a),title:"\u5DE5\u827A\u5361\u5BA1\u6838",width:"30%"},{footer:t(()=>[S("div",ae,[e(_,{type:"primary",onClick:j},{default:t(()=>[m("\u63D0 \u4EA4")]),_:1}),e(_,{onClick:h},{default:t(()=>[m("\u53D6 \u6D88")]),_:1})])]),default:t(()=>[e(V,{model:u,"label-width":"120px",rules:P,ref_key:"ruleFormRef",ref:y},{default:t(()=>[e(i,{label:"\u5BA1\u6838\u72B6\u6001"},{default:t(()=>[e(T,{modelValue:u.auditState,"onUpdate:modelValue":l[3]||(l[3]=a=>u.auditState=a)},{default:t(()=>[e(B,{label:n(p).PASS},{default:t(()=>[m("\u901A\u8FC7")]),_:1},8,["label"]),e(B,{label:n(p).REJECT},{default:t(()=>[m("\u4E0D\u901A\u8FC7")]),_:1},8,["label"])]),_:1},8,["modelValue"])]),_:1}),q(e(i,{label:"\u5BA1\u6838\u610F\u89C1",prop:"auditComment"},{default:t(()=>[e(C,{type:"textarea",modelValue:u.auditComment,"onUpdate:modelValue":l[4]||(l[4]=a=>u.auditComment=a),style:{width:"240px"}},null,8,["modelValue"])]),_:1},512),[[H,u.auditState===2]])]),_:1},8,["model","rules"])]),_:1},8,["modelValue"])])}}});const me=K(le,[["__scopeId","data-v-dd1b8eeb"]]);export{me as default};
